<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="Assets/css/forms.css"> 
  <!-- TAILWIND CDN -->
  <script src="https://cdn.tailwindcss.com"></script> 
  <!-- Bootstrap CDN -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js" integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous"> 
  <!-- Google Fonts CDN -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <!-- Leaflet Maps CDN -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="crossorigin=""></script>

  <style>
    html, body {
      background-color: transparent;
    }
  </style>

</head>
<body>

  <form class="form">
    <div class="inputForm" id="nom-box">
      <input type="text" id="nom" name="nom" placeholder="Nom" required>
      <div id="error-nom" class="error"></div>
    </div>
    <div class="inputForm" id="prenom-box">
      <input type="text" id="prenom" name="prenom" placeholder="Prénom" required>
      <div id="error-prenom" class="error"></div>
    </div>
    <div class="inputForm" id="bd-box">
      <input type="date" id="birthday" name="birthday">
      <div id="error-birthday" class="error"></div>
    </div>

    <select id="countries" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
      <option>Nationalité</option>
      <option>Tunisia</option>
      <option>Algeria</option>
      <option>Morocco</option>
      <option>Palestine</option>
    </select>
    <select id="gender" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
      <option selected>Genre</option>
      <option value="H">Homme</option>
      <option value="F">Femme</option>
    </select>


    <div class="inputSubmit">
      <button type="submit" class="button-submit">Suivant</button>
    </div>
  </form>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      
      let nom = document.getElementById("nom");
      let prenom = document.getElementById("prenom");
      let bd = document.getElementById("birthday");
      let form = document.querySelector("form");
  
      function validateNameField(fieldElement) {
        const value = fieldElement.value.trim();
        const parentBox = fieldElement.parentElement;
  
        let isValid = true;
        const allowedChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzÀ-ÖØ-öø-ÿ ";
  
        for (let i = 0; i < value.length ; i++) {
          if (!allowedChars.includes(value[i])) {
            isValid = false;
            break;
          }
        }
  
        isValid = isValid && value.length > 0;
  
        parentBox.style.border = isValid ? "1px solid black" : "1px solid red";
        parentBox.style.boxShadow = isValid ? "0 10px 30px black" : "0 5px 30px red";
        
        return isValid;
      }
  
      function validateNom() {
        return validateNameField(nom);
      }
  
      function validatePrenom() {
        return validateNameField(prenom);
      }
  
      function validateBirthday() {
        const birthday = bd.value;
        const parentBox = bd.parentElement;
  
        if (!birthday) {
          parentBox.style.border = "1px solid red";
          parentBox.style.boxShadow = "0 5px 30px red";
          return false;
        }
  
        const birthDate = new Date(birthday);
        const today = new Date();
        let age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
          age--;
        }
  
        const isValid = age >= 18;
  
        parentBox.style.border = isValid ? "1px solid black" : "1px solid red";
        parentBox.style.boxShadow = isValid ? "0 10px 30px black" : "0 5px 30px red";
        return isValid;
      }
  
      nom.addEventListener("input", validateNom);
      prenom.addEventListener("input", validatePrenom);
      bd.addEventListener("input", validateBirthday);
  
      form.addEventListener("submit", function(event) {
        event.preventDefault();
        
        const isNomValid = validateNom();
        const isPrenomValid = validatePrenom();
        const isBdValid = validateBirthday();
  
        if (isNomValid && isPrenomValid && isBdValid) {
          window.location.href = "form2.html";
        } else {
          alert("Please correct the highlighted fields");
        }
      });
    });
  </script>
  
  
</body>
</html>
