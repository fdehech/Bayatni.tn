<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>S'inscrire | Bayatni.tn</title>
  <link rel="stylesheet" href="landing.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet" />
</head>
<body>

  <header>
    <div class="logo"><a href="index.html">Bayatni.tn</a></div>
    <nav>
      <a href="login.html" class="btn-outline">Se connecter</a>
    </nav>
  </header>

  <section class="auth-section">
    <div class="auth-card">
      <h1>Créer un compte</h1>
      <form id="signupForm">

        <div class="input-icon">
          <span>👤</span>
          <input type="text" name="fullname" placeholder="Nom complet" required />
        </div>

        <div class="input-icon">
          <span>📧</span>
          <input type="email" name="email" placeholder="Adresse e-mail" required />
        </div>

        <div class="input-icon">
          <span>🔐</span>
          <input type="password" name="password" placeholder="Mot de passe (min. 6 caractères)" required />
        </div>

        <div class="input-icon">
          <span>🔐</span>
          <input type="password" name="confirm_password" placeholder="Confirmer le mot de passe" required />
        </div>

        <hr class="form-separator" />

        <div class="input-icon">
          <span>💳</span>
          <input type="text" name="card_number" placeholder="Numéro de carte" required />
        </div>

        <div class="input-icon">
          <span>👤</span>
          <input type="text" name="card_name" placeholder="Nom sur la carte" required />
        </div>

        <div class="card-row">
          <div class="input-icon">
            <span>🔒</span>
            <input type="password" name="card_cvc" placeholder="code card" maxlength="4" inputmode="numeric" pattern="[0-9]{4}" required />
          </div>
        </div>

        <button type="submit" class="btn-primary full-width">S'inscrire</button>
        <p id="confirmationMessage" class="confirmation-message"></p>
      </form>
    </div>
  </section>

  <footer>
    &copy; 2025 Bayatni.tn — Tous droits réservés.
  </footer>

  <script>
    // Simple validation
    document.getElementById("signupForm").addEventListener("submit", function (e) {
      e.preventDefault();
      const password = document.querySelector('input[name="password"]').value;
      const confirm = document.querySelector('input[name="confirm_password"]').value;
      const cardCvc = document.querySelector('input[name="card_cvc"]').value;

      if (password.length < 6) {
        alert("Le mot de passe doit contenir au moins 6 caractères.");
        return;
      }
      if (password !== confirm) {
        alert("Les mots de passe ne correspondent pas.");
        return;
      }
      
      if (!/^\d{4}$/.test(cardCvc)) {
        alert("Le code card doit être composé de 4 chiffres.");
        return;
      }

      // Success message
      document.getElementById("confirmationMessage").textContent = "✅ Inscription réussie !";
    });

    // Format card input
    document.querySelector('input[name="card_number"]').addEventListener('input', function(e) {
      let value = e.target.value.replace(/\s+/g, '').replace(/[^0-9]/gi, '');
      let formattedValue = '';
      
      for (let i = 0; i < value.length; i++) {
        if (i > 0 && i % 4 === 0) {
          formattedValue += ' ';
        }
        formattedValue += value[i];
      }
      
      e.target.value = formattedValue;
    });
    
    // Only allow numbers for card code
    document.querySelector('input[name="card_cvc"]').addEventListener('input', function(e) {
      // Only allow digits and limit to 4 characters
      e.target.value = e.target.value.replace(/[^0-9]/g, '').substring(0, 4);
    });
  </script>

</body>
</html>
